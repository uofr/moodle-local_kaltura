{"version":3,"sources":["../src/modal_video_picker.js"],"names":["SELECTORS","VIDEO_PICKER_ENTRY_LIST","ENTRY_LIST","ENTRY","ENTRY_NAME","ENTRY_THUMBNAIL","PAGING_BAR","PAGE_ITEM","PAGE_LINK","NEXT_PAGE","PREV_PAGE","SEARCH_FORM","SEARCH_INPUT","SEARCH_CLEAR","SORT","SWITCH_TAB","ENTRY_CHECKBOX","CONFIRM","SELECTED_ENTRY_NAME","TEMPLATES","OVERLAY_LOADING","VIDEO_PICKER_BODY","ModalVideoPicker","root","contextid","search","sort","page","source","hasCe","selectedEntryId","selectedEntryName","selectedEntryThumbnail","getRoot","on","ModalEvents","shown","renderBody","selectedEntryText","text","prop","bodyRendered","find","hidden","ModalVideoPickerEvents","entrySelected","entryId","entryName","entryThumbnail","setBody","hide","e","currentTarget","attr","setPage","refreshEntryList","lastPage","last","preventDefault","val","resetSearch","resetSort","parseInt","not","entry","closest","KalturaAjax","getVideoPickerData","data","renderPromise","Templates","render","promise","then","response","replace","catch","Notification","exception","loadUntilPromiseDone","getModal","pageIndex","removeClass","pageLinks","filter","each","index","element","parent","addClass","area","html","loadingIcon","append","fadeIn","$","when","fadeOut","remove","template","areaSelector","js","replaceNodeContents","Modal","registered","ModalRegistry","register","getType"],"mappings":"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","sourcesContent":["import $ from 'jquery';\nimport Notification from 'core/notification';\nimport Templates from 'core/templates';\nimport {get_string as getString} from 'core/str';\nimport {publish} from 'core/pubsub';\n\nimport Modal from 'core/modal';\nimport ModalRegistry from 'core/modal_registry';\nimport ModalEvents from 'core/modal_events';\nimport ModalVideoPickerEvents from 'local_kaltura/modal_video_picker_events';\n\nimport KalturaAjax from 'local_kaltura/kaltura_ajax';\n\nconst SELECTORS = {\n    VIDEO_PICKER_ENTRY_LIST: '[data-region=\"video-picker-entry-list\"]',\n    ENTRY_LIST: '[data-region=\"entry-list\"]',\n    ENTRY: '[data-entry]',\n    ENTRY_NAME: '[data-region=\"entry-name\"]',\n    ENTRY_THUMBNAIL: '[data-region=\"entry-thumbnail\"]',\n    PAGING_BAR: '[data-region=\"paging-bar\"]',\n    PAGE_ITEM: '.page-item',\n    PAGE_LINK: '[data-region=\"paging-bar\"] [data-action=\"switch-page\"]',\n    NEXT_PAGE: '[data-action=\"next-page\"]',\n    PREV_PAGE: '[data-action=\"prev-page\"]',\n    SEARCH_FORM: '[data-action=\"kaltura-search\"]',\n    SEARCH_INPUT: '#kaltura_search_box',\n    SEARCH_CLEAR: '[data-action=\"kaltura-clear-search\"]',\n    SORT: '#kaltura_sort',\n    SWITCH_TAB: '[data-action=\"switch-tab\"]',\n    ENTRY_CHECKBOX: '.kaltura-entry-checkbox',\n    CONFIRM: '[data-action=\"confirm-entry-selection\"]',\n    SELECTED_ENTRY_NAME: '[data-region=\"selected_entry_name\"]'\n};\n\nconst TEMPLATES = {\n    OVERLAY_LOADING: 'core/overlay_loading',\n    VIDEO_PICKER_BODY: 'local_kaltura/modal_video_picker_body',\n    VIDEO_PICKER_ENTRY_LIST: 'local_kaltura/modal_video_picker_entry_list'\n};\n\nexport default class ModalVideoPicker extends Modal {\n\n    constructor(root) {\n        super(root);\n        this.contextid = null;\n        this.search = '';\n        this.sort = 'recent';\n        this.page = 0;\n        this.source = 1;\n        this.hasCe = false;\n        this.selectedEntryId = null;\n        this.selectedEntryName = null;\n        this.selectedEntryThumbnail = null;\n    }\n\n    registerEventListeners() {\n        super.registerEventListeners();\n\n        this.getRoot().on(ModalEvents.shown, async () => {\n            this.renderBody();\n            if (this.selectedEntryId && this.selectedEntryName && this.selectedEntryThumbnail) {\n                const selectedEntryText = await getString('selected_entry', 'local_kaltura', this.selectedEntryName);\n                $(SELECTORS.SELECTED_ENTRY_NAME).text(selectedEntryText);\n                $(SELECTORS.CONFIRM).prop('disabled', false);\n            }\n        });\n\n        this.getRoot().on(ModalEvents.bodyRendered, () => {\n            $(`[data-entry=\"${this.selectedEntryId}\"]`).find(SELECTORS.ENTRY_CHECKBOX).prop('checked', true);\n        });\n\n        this.getRoot().on(ModalEvents.hidden, () => {\n            if (this.selectedEntryId && this.selectedEntryName && this.selectedEntryThumbnail) {\n                publish(ModalVideoPickerEvents.entrySelected, {\n                    entryId: this.selectedEntryId,\n                    entryName: this.selectedEntryName,\n                    entryThumbnail: this.selectedEntryThumbnail\n                });\n            }\n            this.setBody('');\n            this.search = '';\n            this.sort = 'recent';\n            this.page = 0;\n            this.source = 1;\n        });\n\n        this.getRoot().on('click', SELECTORS.CONFIRM, () => {\n            this.hide();\n        });\n\n        this.getRoot().on('click', SELECTORS.PAGE_LINK, (e) => {\n            const page = $(e.currentTarget).attr('data-page-index');\n            if (this.page === page) return;\n\n            this.setPage(page);\n            this.refreshEntryList();\n        });\n\n        this.getRoot().on('click', SELECTORS.NEXT_PAGE, () => {\n            const lastPage = $(SELECTORS.PAGE_LINK).last().attr('data-page-index');\n            if (this.page == lastPage) return;\n            this.setPage(++this.page);\n            this.refreshEntryList();\n        });\n\n        this.getRoot().on('click', SELECTORS.PREV_PAGE, () => {\n            if (this.page == 0) return;\n            this.setPage(--this.page);\n            this.refreshEntryList();\n        });\n\n        this.getRoot().on('submit', SELECTORS.SEARCH_FORM, (e) => {\n            e.preventDefault();\n            this.search = $(SELECTORS.SEARCH_INPUT).val();\n            this.setPage(0);\n            this.refreshEntryList();\n        });\n\n        this.getRoot().on('click', SELECTORS.SEARCH_CLEAR, () => {\n            this.search = '';\n            $(SELECTORS.SEARCH_INPUT).val('');\n            this.setPage(0);\n            this.refreshEntryList();\n        });\n\n        this.getRoot().on('change', SELECTORS.SORT, (e) => {\n            e.preventDefault();\n            this.setPage(0);\n            this.sort = $(e.currentTarget).val();\n            this.refreshEntryList();\n        });\n\n        this.root.on('click', SELECTORS.SWITCH_TAB, (e) => {\n            this.page = 0;\n            this.resetSearch();\n            this.resetSort();\n            this.source = parseInt($(e.currentTarget).attr('data-source'));\n            this.refreshEntryList();\n        });\n\n        this.getRoot().on('change', SELECTORS.ENTRY_CHECKBOX, async (e) => {\n            $(SELECTORS.ENTRY_CHECKBOX).not($(e.currentTarget)).prop('checked', false);\n            $(SELECTORS.CONFIRM).prop('disabled', !$(e.currentTarget).prop('checked'));\n            const entry = $(e.currentTarget).closest(SELECTORS.ENTRY);\n            if ($(e.currentTarget).prop('checked')) {\n                this.selectedEntryId = entry.attr('data-entry');\n                this.selectedEntryName = entry.find(SELECTORS.ENTRY_NAME).text();\n                this.selectedEntryThumbnail = entry.find(SELECTORS.ENTRY_THUMBNAIL).attr('src');\n                const selectedEntryText = await getString('selected_entry', 'local_kaltura', this.selectedEntryName);\n                $(SELECTORS.SELECTED_ENTRY_NAME).text(selectedEntryText);\n            } else {\n                this.selectedEntryId = null;\n                this.selectedEntryName = null;\n                this.selectedEntryThumbnail = null;\n                const selectedEntryText = await getString('no_selected_entry', 'local_kaltura');\n                $(SELECTORS.SELECTED_ENTRY_NAME).text(selectedEntryText);\n            }\n        });\n\n    }\n\n    resetSearch() {\n        $(SELECTORS.SEARCH_INPUT).val('');\n        this.search = '';\n    }\n\n    resetSort() {\n        $(SELECTORS.SORT).val('recent');\n        this.sort = 'recent';\n    }\n\n    async renderBody() {\n        const data = await KalturaAjax.getVideoPickerData(this.contextid, this.search, this.sort, this.page, this.source, this.hasCe);\n        const renderPromise = Templates.render(TEMPLATES.VIDEO_PICKER_BODY, data);\n        this.setBody(renderPromise);\n    }\n\n    async refreshEntryList() {\n        const promise = KalturaAjax.getVideoPickerData(this.contextid, this.search, this.sort, this.page, this.source, this.hasCe)\n            .then(response => this.replace(response, TEMPLATES.VIDEO_PICKER_ENTRY_LIST, SELECTORS.VIDEO_PICKER_ENTRY_LIST))\n            .then(() => $(`[data-entry=\"${this.selectedEntryId}\"]`).find(SELECTORS.ENTRY_CHECKBOX).prop('checked', true))\n            .catch(Notification.exception);\n\n        this.loadUntilPromiseDone(this.getModal(), promise)\n            .catch(Notification.exception);\n    }\n\n    setPage(pageIndex) {\n        this.page = pageIndex;\n        $(SELECTORS.PAGE_ITEM).removeClass('active');\n        const pageLinks = $(SELECTORS.PAGE_LINK).filter(`[data-page-index=\"${pageIndex}\"]`);\n        pageLinks.each((index, element) => {\n            $(element).parent().addClass('active');\n        });\n    }\n\n    loadUntilPromiseDone(area, promise) {\n        return Templates.render(TEMPLATES.OVERLAY_LOADING, {})\n            .then((html) => {\n                const loadingIcon = $(html);\n                area.append(loadingIcon);\n                loadingIcon.fadeIn(150);\n\n                return $.when(loadingIcon.promise(), promise);\n            })\n            .then((loadingIcon) => {\n                loadingIcon.fadeOut(100);\n                loadingIcon.remove();\n\n                return;\n            });\n    }\n\n    replace(data, template, areaSelector) {\n        return Templates.render(template, data)\n        .then((html, js) => Templates.replaceNodeContents(areaSelector, html, js));\n    }\n\n    static getType() {\n        return 'local_kaltura_modal_video_picker';\n    }\n}\n\nlet registered = false;\nif (!registered) {\n    ModalRegistry.register(ModalVideoPicker.getType(), ModalVideoPicker, 'local_kaltura/modal_video_picker');\n    registered = true;\n}\n"],"file":"modal_video_picker.min.js"}